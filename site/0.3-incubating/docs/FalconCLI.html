<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-11-30
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20151130" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Falcon - FalconCLI</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                        
                    
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://falcon.incubator.apache.org/index.html" id="bannerLeft">
                                                                                                <img src="../images/falcon-logo.png"  alt="Falcon" width="200px" height="45px"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://incubator.apache.org" id="bannerRight">
                                                                                                <img src="../images/apache-incubator-logo.png"  alt="Apache Incubator"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../index.html" title="Home">
        Home</a>
        </li>
      <li class="divider ">/</li>
        <li class="">FalconCLI</li>
        
                
                    
      
                                              
    <li class="pull-right">              <a href="https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12314429&version=12324423" class="externalLink" title="Released: 2013-08-15">
        Released: 2013-08-15</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="http://archive.apache.org/dist/incubator/falcon/" class="externalLink" title="0.3-incubating">
        0.3-incubating</a>
  </li>

                        </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <div class="section">
<h2>FalconCLI<a name="FalconCLI"></a></h2>
<p>FalconCLI is a interface between user and Falcon. It is a command line utility provided by Falcon. FalconCLI supports Entity Management, Instance Management and Admin operations.There is a set of web services that are used by FalconCLI to interact with Falcon.</p></div>
<div class="section">
<h3>Entity Management Operations<a name="Entity_Management_Operations"></a></h3></div>
<div class="section">
<h4>Submit<a name="Submit"></a></h4>
<p>Entity submit action allows a new cluster/feed/process to be setup within Falcon. Submitted entity is not scheduled, meaning it would simply be in the configuration store within Falcon. Besides validating against the schema for the corresponding entity being added, the Falcon system would also perform inter-field validations within the configuration file and validations across dependent entities.</p>
<div class="source">
<pre>
Example: 
$FALCON_HOME/bin/falcon entity -submit -type cluster -file /cluster/definition.xml

</pre></div>
<p>Note: The url option in the above and all subsequent commands is optional. If not mentioned it will be picked from client.properties file. If the option is not provided and also not set in client.properties, Falcon CLI will fail.</p></div>
<div class="section">
<h4>Schedule<a name="Schedule"></a></h4>
<p>Feeds or Processes that are already submitted and present in the config store can be scheduled. Upon schedule, Falcon system wraps the required repeatable action as a bundle of oozie coordinators and executes them on the Oozie scheduler. (It is possible to extend Falcon to use an alternate workflow engine other than Oozie). Falcon overrides the workflow instance's external id in Oozie to reflect the process/feed and the nominal time. This external Id can then be used for instance management functions.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon entity  -type [process|feed] -name &lt;&lt;name&gt;&gt; -schedule

Example:
$FALCON_HOME/bin/falcon entity  -type process -name sampleProcess -schedule

</pre></div></div>
<div class="section">
<h4>Suspend<a name="Suspend"></a></h4>
<p>This action is applicable only on scheduled entity. This triggers suspend on the oozie bundle that was scheduled earlier through the schedule function. No further instances are executed on a suspended process/feed.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon entity  -type [feed|process] -name &lt;&lt;name&gt;&gt; -suspend

</pre></div></div>
<div class="section">
<h4>Resume<a name="Resume"></a></h4>
<p>Puts a suspended process/feed back to active, which in turn resumes applicable oozie bundle.</p>
<div class="source">
<pre>
Usage:
 $FALCON_HOME/bin/falcon entity  -type [feed|process] -name &lt;&lt;name&gt;&gt; -resume

</pre></div></div>
<div class="section">
<h4>Delete<a name="Delete"></a></h4>
<p>Delete operation on the entity removes any scheduled activity on the workflow engine, besides removing the entity from the falcon configuration store. Delete operation on an entity would only succeed if there are no dependent entities on the deleted entity.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon entity  -type [cluster|feed|process] -name &lt;&lt;name&gt;&gt; -delete

</pre></div></div>
<div class="section">
<h4>List<a name="List"></a></h4>
<p>List all the entities within the falcon config store for the entity type being requested. This will include both scheduled and submitted entity configurations.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon entity -type [cluster|feed|process] -list

</pre></div></div>
<div class="section">
<h4>Update<a name="Update"></a></h4>
<p>Update operation allows an already submitted/scheduled entity to be updated. Cluster update is currently not allowed. Feed update can cause cascading update to all the processes already scheduled. The following set of actions are performed in Oozie to realize an update.</p>
<p></p>
<ul>
<li>Suspend the previously scheduled Oozie coordinator. This is prevent any new action from being triggered.</li>
<li>Update the coordinator to set the end time to &quot;now&quot;</li>
<li>Resume the suspended coordiantors</li>
<li>Schedule as per the new process/feed definition with the start time as &quot;now&quot;</li></ul>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon entity  -type [feed|process] -name &lt;&lt;name&gt;&gt; -update

</pre></div></div>
<div class="section">
<h4>Status<a name="Status"></a></h4>
<p>Status returns the current status of the entity.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon entity -type [cluster|feed|process] -name &lt;&lt;name&gt;&gt; -status

</pre></div></div>
<div class="section">
<h4>Dependency<a name="Dependency"></a></h4>
<p>Returns the dependencies of the requested entity. Dependency list include both forward and backward dependencies (depends on &amp; is dependent on). For ex, a feed would show process that are dependent on the feed and the clusters that it depends on.'</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon entity -type [cluster|feed|process] -name &lt;&lt;name&gt;&gt; -dependency

</pre></div></div>
<div class="section">
<h4>Definition<a name="Definition"></a></h4>
<p>Gets the current entity definition as stored in the configuration store. Please note that user documentations in the entity will not be retained.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon entity -type [cluster|feed|process] -name &lt;&lt;name&gt;&gt; -definition

</pre></div></div>
<div class="section">
<h3>Instance Management Options<a name="Instance_Management_Options"></a></h3>
<p>Instance Manager gives user the option to control individual instances of the process based on their instance start time (start time of that instance). Start time needs to be given in standard TZ format. Example:   01 Jan 2012 01:00  =&gt; 2012-01-01T01:00Z</p>
<p>All the instance management operations (except running) allow single instance or list of instance within a Date range to be acted on. Make sure the dates are valid. i.e are within the start and  end time of process itself.</p>
<p>For every query in instance management the process name is a compulsory parameter.</p>
<p>Parameters -start and -end are used to mention the date range within which you want the instance to be operated upon.</p>
<p>-start:   using only  &quot;-start&quot; without  &quot;-end&quot;  will conduct the desired operation only on single instance given by date along with start.</p>
<p>-end:  &quot;-end&quot;  can only be used along with &quot;-start&quot; . It corresponds to the end date till which instance need to operated upon.</p>
<p></p>
<ul>
<li>1. <b>status</b>: -status option via CLI can be used to get the status of a single or multiple instances.  If the instance is not yet materialized but is within the process validity range, WAITING is returned as the state.Along with the status of the instance log location is also returned.</li></ul>
<p></p>
<ul>
<li>2.	<b>running</b>: -running returns all the running instance of the process. It does not take any start or end dates but simply return all the instances in state RUNNING at that given time.</li></ul>
<p></p>
<ul>
<li>3.	<b>rerun</b>: -rerun is the option that you will use most often from instance management. As the name suggest this option is used to rerun a particular instance or instances of the process. The rerun option reruns all parent workflow for the instance, which in turn rerun all the sub-workflows for it. This option is valid for any instance in terminal state, i.e. KILLED, SUCCEEDED, FAILED. User can also set properties in the request, which will give options what types of actions should be rerun like, only failed, run all etc. These properties are dependent on the workflow engine being used along with falcon.</li></ul>
<p></p>
<ul>
<li>4. <b>suspend</b>: -suspend is used to suspend a instance or instances  for the given process. This option pauses the parent workflow at the state, which it was in at the time of execution of this command. This command is similar to SUSPEND process command in functionality only difference being, SUSPEND process suspends all the instance whereas suspend instance suspend only that instance or instances in the range.</li></ul>
<p></p>
<ul>
<li>5.	<b>resume</b>: -resume option is used to resume any instance that  is in suspended state.  (Note: due to a bug in oozie &#xef;&#xbf;&#xbd;resume option in some cases may not actually resume the suspended instance/ instances)</li>
<li>6. <b>kill</b>: -kill option can be used to kill an instance or multiple instances</li></ul>
<p>In all the cases where your request is syntactically correct but logically not, the instance / instances are returned with the same status as earlier. Example:  trying to resume a KILLED  / SUCCEEDED instance will return the instance with KILLED / SUCCEEDED, without actually performing any operation. This is so because only an instance in SUSPENDED state can be resumed. Same thing is valid for rerun a SUSPENDED or RUNNING options etc.</p></div>
<div class="section">
<h4>Status<a name="Status"></a></h4>
<p>Status option via CLI can be used to get the status of a single or multiple instances.  If the instance is not yet materialized but is within the process validity range, WAITING is returned as the state. Along with the status of the instance time is also returned. Log location gives the oozie workflow url If the instance is in WAITING state, missing dependencies are listed</p>
<p>Example : Suppose a process has 3 instance, one has succeeded,one is in running state and other one is waiting, the expected output is:</p>
<p>{&quot;status&quot;:&quot;SUCCEEDED&quot;,&quot;message&quot;:&quot;getStatus is successful&quot;,&quot;instances&quot;:[{&quot;instance&quot;:&quot;2012-05-07T05:02Z&quot;,&quot;status&quot;:&quot;SUCCEEDED&quot;,&quot;logFile&quot;:&quot;http://oozie-dashboard-url&quot;},{&quot;instance&quot;:&quot;2012-05-07T05:07Z&quot;,&quot;status&quot;:&quot;RUNNING&quot;,&quot;logFile&quot;:&quot;http://oozie-dashboard-url&quot;}, {&quot;instance&quot;:&quot;2010-01-02T11:05Z&quot;,&quot;status&quot;:&quot;WAITING&quot;}]</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon instance -type &lt;&lt;feed/process&gt;&gt; -name &lt;&lt;name&gt;&gt; -status -start &quot;yyyy-MM-dd'T'HH:mm'Z'&quot; -end &quot;yyyy-MM-dd'T'HH:mm'Z'&quot;

</pre></div></div>
<div class="section">
<h4>Kill<a name="Kill"></a></h4>
<p>Kill sub-command is used to kill all the instances of the specified process whose nominal time is between the given start time and end time.</p>
<p>Note:  1. For all the instance management sub-commands, if end time is not specified, Falcon will perform the actions on all the instances whose instance time falls after the start time.</p>
<p>2. The start time and end time needs to be specified in TZ format.  Example:   01 Jan 2012 01:00  =&gt; 2012-01-01T01:00Z</p>
<p>3. Process name is compulsory parameter for each instance management command.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon instance -type &lt;&lt;feed/process&gt;&gt; -name &lt;&lt;name&gt;&gt; -kill -start &quot;yyyy-MM-dd'T'HH:mm'Z'&quot; -end &quot;yyyy-MM-dd'T'HH:mm'Z'&quot;

</pre></div></div>
<div class="section">
<h4>Suspend<a name="Suspend"></a></h4>
<p>Suspend is used to suspend a instance or instances  for the given process. This option pauses the parent workflow at the state, which it was in at the time of execution of this command.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon instance -type &lt;&lt;feed/process&gt;&gt; -name &lt;&lt;name&gt;&gt; -suspend -start &quot;yyyy-MM-dd'T'HH:mm'Z'&quot; -end &quot;yyyy-MM-dd'T'HH:mm'Z'&quot;

</pre></div></div>
<div class="section">
<h4>Continue<a name="Continue"></a></h4>
<p>Continue option is used to continue the failed workflow instance. This option is valid only for process instances in terminal state, i.e. SUCCEDDED, KILLED or FAILED.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon instance -type &lt;&lt;feed/process&gt;&gt; -name &lt;&lt;name&gt;&gt; -re-run -start &quot;yyyy-MM-dd'T'HH:mm'Z'&quot; -end &quot;yyyy-MM-dd'T'HH:mm'Z'&quot;

</pre></div></div>
<div class="section">
<h4>Rerun<a name="Rerun"></a></h4>
<p>Rerun option is used to rerun instances of a given process. This option is valid only for process instances in terminal state, i.e. SUCCEDDED, KILLED or FAILED. Optionally, you can specify the properties to override.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon instance -type &lt;&lt;feed/process&gt;&gt; -name &lt;&lt;name&gt;&gt; -re-run -start &quot;yyyy-MM-dd'T'HH:mm'Z'&quot; -end &quot;yyyy-MM-dd'T'HH:mm'Z'&quot; [-file &lt;&lt;properties file&gt;&gt;]

</pre></div></div>
<div class="section">
<h4>Resume<a name="Resume"></a></h4>
<p>Resume option is used to resume any instance that  is in suspended state.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon instance -type &lt;&lt;feed/process&gt;&gt; -name &lt;&lt;name&gt;&gt; -resume -start &quot;yyyy-MM-dd'T'HH:mm'Z'&quot; -end &quot;yyyy-MM-dd'T'HH:mm'Z'&quot;

</pre></div></div>
<div class="section">
<h4>Running<a name="Running"></a></h4>
<p>Running option provides all the running instances of the mentioned process.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon instance -type &lt;&lt;feed/process&gt;&gt; -name &lt;&lt;name&gt;&gt; -running

</pre></div></div>
<div class="section">
<h4>Logs<a name="Logs"></a></h4>
<p>Get logs for instance actions</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon instance -type &lt;&lt;feed/process&gt;&gt; -name &lt;&lt;name&gt;&gt; -logs -start &quot;yyyy-MM-dd'T'HH:mm'Z'&quot; [-end &quot;yyyy-MM-dd'T'HH:mm'Z'&quot;] [-runid &lt;&lt;runid&gt;&gt;]

</pre></div></div>
<div class="section">
<h3>Admin Options<a name="Admin_Options"></a></h3></div>
<div class="section">
<h4>Help<a name="Help"></a></h4>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon admin -version

</pre></div></div>
<div class="section">
<h4>Version<a name="Version"></a></h4>
<p>Version returns the current verion of Falcon installed.</p>
<div class="source">
<pre>
Usage:
$FALCON_HOME/bin/falcon admin -help

</pre></div></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
              <div class="row span12">Copyright &copy;                    2013-2015
                        <a href="http://www.apache.org">Apache Software Foundation</a>.
            All Rights Reserved.      
                    
      </div>

                          
                <p id="poweredBy" class="pull-right">
                          <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
              </p>
        
                </div>
    </footer>
  </body>
</html>
