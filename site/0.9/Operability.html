<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-02-09
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160209" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Falcon - Operationalizing Falcon</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script type="text/javascript">$( document ).ready( function() { $( '.carousel' ).carousel( { interval: 3500 } ) } );</script>
          
            </head>
        <body class="topBarDisabled">
          
                        
                    
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                                                                                                <img src="images/falcon-logo.png"  alt="Apache Falcon" width="200px" height="45px"/>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="index.html" title="Falcon">
        Falcon</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Operationalizing Falcon</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2016-02-09</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: 0.9</li>
            
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <div class="section">
<h2>Operationalizing Falcon<a name="Operationalizing_Falcon"></a></h2></div>
<div class="section">
<h3>Overview<a name="Overview"></a></h3>
<p>Apache Falcon provides various tools to operationalize Falcon consisting of Alerts for unrecoverable errors, Audits of user actions, Metrics, and Notifications. They are detailed below.</p>
<p>++ Lineage</p>
<p>Currently Lineage has no way to access or restore information about entity instances created during the time lineage was disabled. Information about entities however, is preserved and bootstrapped when lineage is enabled. If you have to reset the graph db then you can delete the graph db files as specified in the startup.properties and restart the falcon. Please note: you will loose all the information about the instances if you delete the graph db.</p></div>
<div class="section">
<h3>Monitoring<a name="Monitoring"></a></h3>
<p>Falcon provides monitoring of various events by capturing metrics of those events. The metric numbers can then be used to monitor performance and health of the Falcon system and the entire processing pipelines.</p>
<p>Falcon also exposes <a class="externalLink" href="https://github.com/thinkaurelius/titan/wiki/Titan-Performance-and-Monitoring">metrics for titandb</a></p>
<p>Users can view the logs of these events in the metric.log file, by default this file is created under ${user.dir}/logs/ directory. Users may also extend the Falcon monitoring framework to send events to systems like Mondemand/lwes by implementingorg.apache.falcon.plugin.MonitoringPlugin interface.</p>
<p>The following events are captured by Falcon for logging the metrics:</p>
<ol style="list-style-type: decimal">
<li>New cluster definitions posted to Falcon (success &amp; failures)</li>
<li>New feed definition posted to Falcon (success &amp; failures)</li>
<li>New process definition posted to Falcon (success &amp; failures)</li>
<li>Process update events (success &amp; failures)</li>
<li>Feed update events (success &amp; failures)</li>
<li>Cluster update events (success &amp; failures)</li>
<li>Process suspend events (success &amp; failures)</li>
<li>Feed suspend events (success &amp; failures)</li>
<li>Process resume events (success &amp; failures)</li>
<li>Feed resume events (success &amp; failures)</li>
<li>Process remove events (success &amp; failures)</li>
<li>Feed remove events (success &amp; failures)</li>
<li>Cluster remove events (success &amp; failures)</li>
<li>Process instance kill events (success &amp; failures)</li>
<li>Process instance re-run events (success &amp; failures)</li>
<li>Process instance generation events</li>
<li>Process instance failure events</li>
<li>Process instance auto-retry events</li>
<li>Process instance retry exhaust events</li>
<li>Feed instance deletion event</li>
<li>Feed instance deletion failure event (no retries)</li>
<li>Feed instance replication event</li>
<li>Feed instance replication failure event</li>
<li>Feed instance replication auto-retry event</li>
<li>Feed instance replication retry exhaust event</li>
<li>Feed instance late arrival event</li>
<li>Feed instance post cut-off arrival event</li>
<li>Process re-run due to late feed event</li>
<li>Transaction rollback failed event</li></ol>
<p>The metric logged for an event has the following properties:</p>
<ol style="list-style-type: decimal">
<li>Action - Name of the event.</li>
<li>Dimensions - A list of name/value pairs of various attributes for a given action.</li>
<li>Status- Status of an action FAILED/SUCCEEDED.</li>
<li>Time-taken - Time taken in nanoseconds for a given action.</li></ol>
<p>An example for an event logged for a submit of a new process definition:</p>
<p>2012-05-04 12:23:34,026 {Action:submit, Dimensions:{entityType=process}, Status: SUCCEEDED, Time-taken:97087000 ns}</p>
<p>Users may parse the metric.log or capture these events from custom monitoring frameworks and can plot various graphs or send alerts according to their requirements.</p></div>
<div class="section">
<h3>Notifications<a name="Notifications"></a></h3>
<p>Falcon creates a JMS topic for every process/feed that is scheduled in Falcon. The implementation class and the broker url of the JMS engine are read from the dependent cluster's definition. Users may register consumers on the required topic to check the availability or status of feed instances.</p>
<p>For a given process that is scheduled, the name of the topic is same as the process name. Falcon sends a Map message for every feed produced by the instance of a process to the JMS topic. The JMS MapMessage sent to a topic has the following properties: entityName, feedNames, feedInstancePath, workflowId, runId, nominalTime, timeStamp, brokerUrl, brokerImplClass, entityType, operation, logFile, topicName, status, brokerTTL;</p>
<p>For a given feed that is scheduled, the name of the topic is same as the feed name. Falcon sends a map message for every feed instance that is deleted/archived/replicated depending upon the retention policy set in the feed definition. The JMS MapMessage sent to a topic has the following properties: entityName, feedNames, feedInstancePath, workflowId, runId, nominalTime, timeStamp, brokerUrl, brokerImplClass, entityType, operation, logFile, topicName, status, brokerTTL;</p>
<p>The JMS messages are automatically purged after a certain period (default 3 days) by the Falcon JMS house-keeping service.TTL (Time-to-live) for JMS message can be configured in the Falcon's startup.properties file.</p></div>
<div class="section">
<h3>Alerts<a name="Alerts"></a></h3>
<p>Falcon generates alerts for unrecoverable errors into a log file by default. Users can view these alerts in the alerts.log file, by default this file is created under ${user.dir}/logs/ directory.</p>
<p>Users may also extend the Falcon Alerting plugin to send events to systems like Nagios, etc. by extending org.apache.falcon.plugin.AlertingPlugin interface.</p></div>
<div class="section">
<h3>Audits<a name="Audits"></a></h3>
<p>Falcon audits all user activity and captures them into a log file by default. Users can view these audits in the audit.log file, by default this file is created under ${user.dir}/logs/ directory.</p>
<p>Users may also extend the Falcon Audit plugin to send audits to systems like Apache Argus, etc. by extending org.apache.falcon.plugin.AuditingPlugin interface.</p></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
              <div class="row span12">Copyright &copy;                    2013-2016
                        <a href="http://www.apache.org">Apache Software Foundation</a>.
            All Rights Reserved.      
                    
      </div>

                          
                <p id="poweredBy" class="pull-right">
                          <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
              </p>
        
                </div>
    </footer>
  </body>
</html>
